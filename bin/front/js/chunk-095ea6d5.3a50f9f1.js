(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-095ea6d5"],{"15fd":function(t,e,a){"use strict";a("6b54"),a("2397");var r=a("d225"),n=a("b0b4"),o=a("4e2b"),i=a("308d"),s=a("6bb5"),c=a("9ab4"),u=a("60a3");function l(t){var e=f();return function(){var a,r=Object(s["a"])(t);if(e){var n=Object(s["a"])(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return Object(i["a"])(this,a)}}function f(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var m=function(t){Object(o["a"])(a,t);var e=l(a);function a(){var t;return Object(r["a"])(this,a),t=e.apply(this,arguments),t.formItem={source:"",database:"",textarea:"",backup:1,text:"",idc:"",table:"",assigned:"",delay:null,tp:0,row:1,name:"",isquery:2,ip:"",add:"",username:"",password:"",port:"",id:0},t.wordList=[],t.page_number=1,t.current=1,t.find={picker:[],user:"",valve:!1},t.query={user:"",department:"",valve:!1,username:"",idc:"",source:""},t.table_data=[],t.testResults=[],t.validate_gen=!0,t.loading=!1,t.is_open=!1,t.group_list=[],t.group_props=[],t.edit_password=!1,t.savePassLoading=!1,t}return Object(n["a"])(a,[{key:"cancel_password",value:function(){this.edit_password=!1}}]),a}(u["d"]);m=Object(c["a"])([Object(u["a"])({components:{}})],m),e["a"]=m},"346d":function(t,e,a){"use strict";a("fd3e")},"3b2b":function(t,e,a){var r=a("7726"),n=a("5dbc"),o=a("86cc").f,i=a("9093").f,s=a("aae3"),c=a("0bfb"),u=r.RegExp,l=u,f=u.prototype,m=/a/g,d=/a/g,p=new u(m)!==m;if(a("9e1e")&&(!p||a("79e5")((function(){return d[a("2b4c")("match")]=!1,u(m)!=m||u(d)==d||"/a/i"!=u(m,"i")})))){u=function(t,e){var a=this instanceof u,r=s(t),o=void 0===e;return!a&&r&&t.constructor===u&&o?t:n(p?new l(r&&!o?t.source:t,e):l((r=t instanceof u)?t.source:t,r&&o?c.call(t):e),a?this:f,u)};for(var b=function(t){t in u||o(u,t,{configurable:!0,get:function(){return l[t]},set:function(e){l[t]=e}})},g=i(l),_=0;g.length>_;)b(g[_++]);f.constructor=u,u.prototype=f,a("2aba")(r,"RegExp",u)}a("7a56")("RegExp")},"5ef1":function(t,e,a){},7155:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Col",{attrs:{span:"5"}},[a("Card",[a("p",{attrs:{slot:"title"},slot:"title"},[a("Icon",{attrs:{type:"md-refresh"}}),t._v("\n                添加数据库\n            ")],1),a("div",{staticClass:"edittable-testauto-con"},[a("Form",{ref:"formValidate",attrs:{model:t.formItem,"label-width":100,rules:t.ruleInline}},[a("Form-item",{attrs:{label:"环境:",prop:"add"}},[a("Select",{model:{value:t.formItem.add,callback:function(e){t.$set(t.formItem,"add",e)},expression:"formItem.add"}},t._l(t.comList,(function(e){return a("Option",{key:e,attrs:{value:e}},[t._v(t._s(e))])})),1)],1),a("Form-item",{attrs:{label:"连接名称:",prop:"name"}},[a("Input",{attrs:{placeholder:"请输入"},model:{value:t.formItem.name,callback:function(e){t.$set(t.formItem,"name",e)},expression:"formItem.name"}})],1),a("Form-item",{attrs:{label:"数据库地址:",prop:"ip"}},[a("Input",{attrs:{placeholder:"请输入"},model:{value:t.formItem.ip,callback:function(e){t.$set(t.formItem,"ip",e)},expression:"formItem.ip"}})],1),a("Form-item",{attrs:{label:"端口:",prop:"port"}},[a("Input",{attrs:{placeholder:"请输入"},model:{value:t.formItem.port,callback:function(e){t.$set(t.formItem,"port",e)},expression:"formItem.port"}})],1),a("Form-item",{attrs:{label:"用户名:",prop:"username"}},[a("Input",{attrs:{placeholder:"请输入"},model:{value:t.formItem.username,callback:function(e){t.$set(t.formItem,"username",e)},expression:"formItem.username"}})],1),a("Form-item",{attrs:{label:"密码:",prop:"password"}},[a("Input",{attrs:{placeholder:"请输入",type:"password"},model:{value:t.formItem.password,callback:function(e){t.$set(t.formItem,"password",e)},expression:"formItem.password"}})],1),a("Form-item",{attrs:{label:"数据源类型:"}},[a("RadioGroup",{model:{value:t.formItem.isquery,callback:function(e){t.$set(t.formItem,"isquery",e)},expression:"formItem.isquery"}},[a("Radio",{attrs:{label:2}},[t._v("读写")]),a("Radio",{attrs:{label:1}},[t._v("读")]),a("Radio",{attrs:{label:0}},[t._v("写")])],1)],1),a("Button",{attrs:{type:"info"},on:{click:function(e){return t.testConnection()}}},[t._v("测试连接")]),a("Button",{staticStyle:{"margin-left":"5%"},attrs:{type:"success"},on:{click:function(e){return t.addConnection()}}},[t._v("确定")]),a("Button",{staticStyle:{"margin-left":"5%"},attrs:{type:"warning"},on:{click:function(e){return t.resetForm()}}},[t._v("重置")])],1)],1)])],1),a("Col",{staticClass:"padding-left-10",attrs:{span:"19"}},[a("Card",[a("p",{attrs:{slot:"title"},slot:"title"},[a("Icon",{attrs:{type:"md-apps"}}),t._v("\n                数据库详情表\n            ")],1),a("Input",{staticStyle:{width:"15%"},attrs:{placeholder:"请填写连接名",clearable:""},model:{value:t.query.source,callback:function(e){t.$set(t.query,"source",e)},expression:"query.source"}}),a("Select",{staticClass:"margin-left-10",staticStyle:{width:"15%"},attrs:{placeholder:"请填写环境"},model:{value:t.query.idc,callback:function(e){t.$set(t.query,"idc",e)},expression:"query.idc"}},t._l(t.comList,(function(e){return a("Option",{key:e,attrs:{value:e}},[t._v(t._s(e))])})),1),a("Button",{staticClass:"margin-left-10",attrs:{type:"primary"},on:{click:t.queryData}},[t._v("查询")]),a("Button",{staticClass:"margin-left-10",attrs:{type:"warning"},on:{click:t.queryCancel}},[t._v("重置")]),a("div",{staticClass:"edittable-con-1"},[a("Table",{attrs:{columns:t.columns,data:t.table_data},scopedSlots:t._u([{key:"is_query",fn:function(e){var r=e.row;return[0===r.IsQuery?a("Tag",{attrs:{checkable:"",color:"primary"}},[t._v("写")]):t._e(),1===r.IsQuery?a("Tag",{attrs:{checkable:"",color:"success"}},[t._v("读")]):t._e(),2===r.IsQuery?a("Tag",{attrs:{checkable:"",color:"warning"}},[t._v("读写")]):t._e()]}},{key:"action",fn:function(e){var r=e.row;return[a("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"info",size:"small"},on:{click:function(e){return t.viewConnectionModal(r)}}},[t._v("详细信息\n                        ")]),a("Poptip",{attrs:{confirm:"",title:"删除数据源将会删除对应的所有工单信息,确定要删除吗？",transfer:""},on:{"on-ok":function(e){return t.delConnection(r)}}},[a("Button",{attrs:{type:"warning",size:"small"}},[t._v("删除")])],1)]}}])})],1),a("br"),a("Page",{attrs:{total:t.page_number,"show-elevator":"","page-size":10,current:t.current},on:{"on-change":t.getPageInfo,"update:current":function(e){t.current=e}}})],1)],1),a("Modal",{attrs:{width:500,okText:"保存"},on:{"on-ok":t.modifyBase},model:{value:t.is_open,callback:function(e){t.is_open=e},expression:"is_open"}},[a("h3",{staticStyle:{color:"#2D8CF0"},attrs:{slot:"header"},slot:"header"},[t._v("数据库连接信息")]),a("Form",{attrs:{"label-width":100,"label-position":"right"}},[a("FormItem",{attrs:{label:"环境"}},[a("Input",{attrs:{readonly:""},model:{value:t.edit_base_info.IDC,callback:function(e){t.$set(t.edit_base_info,"IDC",e)},expression:"edit_base_info.IDC"}})],1),a("FormItem",{attrs:{label:"连接名称:"}},[a("Input",{attrs:{readonly:""},model:{value:t.edit_base_info.Source,callback:function(e){t.$set(t.edit_base_info,"Source",e)},expression:"edit_base_info.Source"}})],1),a("FormItem",{attrs:{label:"数据库地址:"}},[a("Input",{model:{value:t.edit_base_info.IP,callback:function(e){t.$set(t.edit_base_info,"IP",e)},expression:"edit_base_info.IP"}})],1),a("FormItem",{attrs:{label:"端口:"}},[a("Input",{model:{value:t.edit_base_info.Port,callback:function(e){t.$set(t.edit_base_info,"Port",e)},expression:"edit_base_info.Port"}})],1),a("FormItem",{attrs:{label:"用户名:"}},[a("Input",{model:{value:t.edit_base_info.Username,callback:function(e){t.$set(t.edit_base_info,"Username",e)},expression:"edit_base_info.Username"}})],1),a("FormItem",{attrs:{label:"密码:"}},[a("Input",{attrs:{type:"password"},model:{value:t.edit_base_info.Password,callback:function(e){t.$set(t.edit_base_info,"Password",e)},expression:"edit_base_info.Password"}})],1)],1)],1)],1)},n=[],o=(a("6b54"),a("2397"),a("7f7f"),a("d225")),i=a("b0b4"),s=a("4e2b"),c=a("308d"),u=a("6bb5"),l=(a("3b2b"),a("9ab4")),f=a("bc3a"),m=a.n(f),d=a("60a3"),p=a("15fd");function b(t){var e=g();return function(){var a,r=Object(u["a"])(t);if(e){var n=Object(u["a"])(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return Object(c["a"])(this,a)}}function g(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var _=function(t,e,a){var r=new RegExp("[`~!@#$^&*()={}':;',\\[\\]<>/?~！@#￥……&*（）——{}【】‘；：”“'。，、？]");r.test(e)?a(new Error("特殊字符仅可使用|与-")):a()},v=function(t,e,a){var r=new RegExp("[`?？^$]");r.test(e)?a(new Error("密码中不得含有? @ ^ $")):a()},h=function(t){Object(s["a"])(a,t);var e=b(a);function a(){var t;return Object(o["a"])(this,a),t=e.apply(this,arguments),t.columns=[{title:"连接名称",key:"Source"},{title:"查询数据源",key:"IsQuery",slot:"is_query"},{title:"数据库地址",key:"IP"},{title:"环境",key:"IDC"},{title:"操作",key:"action",width:300,slot:"action"}],t.ruleInline={add:[{required:!0,message:"请选择对应环境",trigger:"change"}],name:[{required:!0,message:"请填写连接名称",trigger:"blur"},{validator:_,trigger:"blur"}],ip:[{required:!0,message:"请填写连接地址",trigger:"blur"}],username:[{required:!0,message:"请填写用户名",trigger:"blur"}],port:[{required:!0,message:"请填写端口",trigger:"blur"}],password:[{required:!0,message:"请填写密码",trigger:"blur"},{validator:v,trigger:"blur"}]},t.comList=[],t.edit_base_info={},t}return Object(i["a"])(a,[{key:"resetForm",value:function(){this.formItem=this.$config.clearObj(this.formItem)}},{key:"testConnection",value:function(){var t=this;m.a.put("".concat(this.$config.url,"/management_db/test"),{ip:this.formItem.ip,username:this.formItem.username,password:this.formItem.password,port:parseInt(this.formItem.port)}).then((function(e){t.$config.notice(e.data)})).catch((function(e){t.$config.err_notice(t,e)}))}},{key:"addConnection",value:function(){var t=this,e=this.$refs["formValidate"];e.validate((function(a){a&&m.a.post("".concat(t.$config.url,"/management_db"),{source:t.formItem.name,idc:t.formItem.add,ip:t.formItem.ip,username:t.formItem.username,password:t.formItem.password,port:parseInt(t.formItem.port),is_query:t.formItem.isquery}).then((function(a){t.$config.notice(a.data),t.getPageInfo(t.current),e.resetFields()})).catch((function(e){t.$config.err_notice(t,e)}))}))}},{key:"viewConnectionModal",value:function(t){this.is_open=!0,this.edit_base_info=t}},{key:"delConnection",value:function(t){var e=this,a=this.current;1===this.table_data.length&&(a-=1),m.a.delete("".concat(this.$config.url,"/management_db?source=").concat(t.Source)).then((function(t){e.$config.notice(t.data),e.getPageInfo(a)})).catch((function(t){e.$config.err_notice(e,t)}))}},{key:"getPageInfo",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;m.a.get("".concat(this.$config.url,"/management_db?page=").concat(e,"&con=").concat(JSON.stringify(this.query))).then((function(e){t.table_data=e.data.data,t.page_number=parseInt(e.data.page),t.comList=e.data.custom})).catch((function(e){t.$config.err_notice(t,e)}))}},{key:"modifyBase",value:function(){var t=this,e=JSON.parse(JSON.stringify(this.edit_base_info));e.Port=parseInt(e.Port),m.a.put("".concat(this.$config.url,"/management_db"),{data:e}).then((function(e){return t.$config.notice(e.data)})).catch((function(e){return t.$config.err_notice(t,e)}))}},{key:"queryData",value:function(){this.query.valve=!0,this.getPageInfo()}},{key:"queryCancel",value:function(){this.query.valve=!1,this.getPageInfo()}},{key:"mounted",value:function(){this.getPageInfo()}}]),a}(Object(d["b"])(p["a"]));h=Object(l["a"])([d["a"]],h);var y=h,I=y,k=(a("a48a"),a("346d"),a("2877")),w=Object(k["a"])(I,r,n,!1,null,null,null);e["default"]=w.exports},a48a:function(t,e,a){"use strict";a("5ef1")},aae3:function(t,e,a){var r=a("d3f4"),n=a("2d95"),o=a("2b4c")("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==n(t))}},fd3e:function(t,e,a){}}]);
//# sourceMappingURL=chunk-095ea6d5.3a50f9f1.js.map