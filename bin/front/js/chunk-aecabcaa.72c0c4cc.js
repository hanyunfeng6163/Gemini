(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-aecabcaa"],{"54fb":function(t,e,a){},"5d9d":function(t,e,a){"use strict";a("54fb")},"98aa":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Row",[a("Col",{attrs:{span:"6"}},[a("Card",[a("p",{attrs:{slot:"title"},slot:"title"},[a("Icon",{attrs:{type:"ios-redo"}}),t._v("\n                    选择数据库\n                ")],1),a("div",{staticClass:"edittable-test-con"},[a("div",{staticClass:"margin-bottom-10",attrs:{id:"showImage"}},[a("Form",{ref:"formItem",attrs:{model:t.formItem,rules:t.ruleValidate,"label-width":80}},[a("FormItem",{attrs:{label:"环境:",prop:"idc"}},[a("Select",{on:{"on-change":t.fetchSource},model:{value:t.formItem.idc,callback:function(e){t.$set(t.formItem,"idc",e)},expression:"formItem.idc"}},t._l(t.fetchData.idc,(function(e){return a("Option",{key:e,attrs:{value:e}},[t._v(t._s(e))])})),1)],1),a("FormItem",{attrs:{label:"连接名:",prop:"source"}},[a("Select",{on:{"on-change":t.fetchBase},model:{value:t.formItem.source,callback:function(e){t.$set(t.formItem,"source",e)},expression:"formItem.source"}},t._l(t.fetchData.source,(function(e){return a("Option",{key:e,attrs:{value:e}},[t._v(t._s(e)+"\n                                    ")])})),1)],1),a("FormItem",{attrs:{label:"库名:",prop:"database"}},[a("Select",{attrs:{placeholder:"请选择"},on:{"on-change":t.fetchTable},model:{value:t.formItem.database,callback:function(e){t.$set(t.formItem,"database",e)},expression:"formItem.database"}},t._l(t.fetchData.base,(function(e){return a("Option",{key:e,attrs:{value:e}},[t._v(t._s(e)+"\n                                    ")])})),1)],1),a("FormItem",{attrs:{label:"工单说明:",prop:"text"}},[a("Input",{attrs:{placeholder:"请输入",type:"textarea",rows:4},model:{value:t.formItem.text,callback:function(e){t.$set(t.formItem,"text",e)},expression:"formItem.text"}})],1),a("FormItem",{attrs:{label:"审核人:",prop:"assigned"}},[a("Select",{attrs:{filterable:""},model:{value:t.formItem.assigned,callback:function(e){t.$set(t.formItem,"assigned",e)},expression:"formItem.assigned"}},t._l(t.fetchData.assigned,(function(e){return a("Option",{key:e,attrs:{value:e}},[t._v(t._s(e))])})),1)],1),a("FormItem",{attrs:{label:"是否备份",prop:"backup"}},[a("RadioGroup",{model:{value:t.formItem.backup,callback:function(e){t.$set(t.formItem,"backup",e)},expression:"formItem.backup"}},[a("Radio",{attrs:{label:1}},[t._v("是")]),a("Radio",{attrs:{label:0}},[t._v("否")])],1)],1),a("FormItem",{attrs:{label:"定时执行"}},[a("DatePicker",{attrs:{format:"yyyy-MM-dd HH:mm",type:"datetime",placeholder:"选择时间点",options:t.invalidDate,editable:!1},on:{"on-change":function(e){t.formItem.delay=e}},model:{value:t.formItem.delay,callback:function(e){t.$set(t.formItem,"delay",e)},expression:"formItem.delay"}})],1)],1),a("Form",[a("FormItem",[a("Col",{staticClass:"margin-left-10",attrs:{span:"5"}},[a("Button",{attrs:{type:"error",icon:"md-trash"},nativeOn:{click:function(e){return t.clearForm()}}},[t._v("重置\n                                    ")])],1),a("Col",{staticClass:"margin-left-10",attrs:{span:"5"}},[a("Button",{attrs:{type:"primary",icon:"md-search",loading:t.loading},nativeOn:{click:function(e){return t.testSql()}}},[t._v("检测\n                                    ")])],1),a("Col",{staticClass:"margin-left-10",attrs:{span:"5"}},[a("Button",{attrs:{type:"warning",icon:"ios-brush",loading:t.loading},nativeOn:{click:function(e){return t.beauty()}}},[t._v("美化\n                                    ")])],1),a("Col",{staticClass:"margin-left-10",attrs:{span:"5"}},[a("Button",{attrs:{type:"success",icon:"ios-redo",disabled:this.validate_gen},nativeOn:{click:function(e){return t.commitOrder()}}},[t._v("提交\n                                    ")])],1)],1)],1),a("Alert",[t._v("检测表字段提示信息\n                            "),a("template",{slot:"desc"},[a("p",[t._v("1.错误等级 0正常,其他均为有问题。")]),a("p",[t._v("2.阶段状态 审核成功")]),a("p",[t._v("3.错误信息 用来表示错误信息")]),a("p",[t._v("4.当前检查的sql")]),a("p",[t._v("注:只有错误等级等于0时提交按钮才会激活")])])],2)],1)])])],1),a("Col",{staticClass:"padding-left-10",attrs:{span:"18"}},[a("Card",[a("p",{attrs:{slot:"title"},slot:"title"},[a("Icon",{attrs:{type:"ios-crop"}}),t._v("\n                    填写sql语句\n                ")],1),a("editor",{on:{init:t.editorInit,setCompletions:t.setCompletions},model:{value:t.formItem.textarea,callback:function(e){t.$set(t.formItem,"textarea",e)},expression:"formItem.textarea"}}),a("br"),a("br"),a("Table",{attrs:{columns:t.testColumns,data:t.testResults,"highlight-row":""}})],1)],1)],1)],1)},n=[],o=(a("ac4d"),a("8a81"),a("5df3"),a("1c4c"),a("7f7f"),a("6b54"),a("2397"),a("28a5"),a("ac6a"),a("d225")),s=a("b0b4"),i=a("4e2b"),c=a("308d"),l=a("6bb5"),u=a("9ab4"),f=a("bc3a"),m=a.n(f),d=a("a897"),p=a("60a3"),b=a("4ff6"),v=a("bf9e"),h=a("db05"),y=a.n(h);function I(t,e){var a;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(a=g(t))||e&&t&&"number"===typeof t.length){a&&(t=a);var r=0,n=function(){};return{s:n,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,i=!1;return{s:function(){a=t[Symbol.iterator]()},n:function(){var t=a.next();return s=t.done,t},e:function(t){i=!0,o=t},f:function(){try{s||null==a.return||a.return()}finally{if(i)throw o}}}}function g(t,e){if(t){if("string"===typeof t)return _(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_(t,e):void 0}}function _(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function k(t){var e=x();return function(){var a,r=Object(l["a"])(t);if(e){var n=Object(l["a"])(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return Object(c["a"])(this,a)}}function x(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var O=function(t){Object(i["a"])(a,t);var e=k(a);function a(){return Object(o["a"])(this,a),e.apply(this,arguments)}return Object(s["a"])(a,[{key:"beauty",value:function(){this.formItem.textarea=y.a.format(this.formItem.textarea)}},{key:"testSql",value:function(){var t=this,e=this.$refs["formItem"];e.validate((function(e){e?(t.loading=!0,m.a.put("".concat(t.$config.url,"/fetch/test"),{source:t.formItem.source,database:t.formItem.database,sql:t.formItem.textarea,isDMl:!0}).then((function(e){t.testResults=e.data;var a=0;t.testResults.forEach((function(t){0!==t.Level&&(a+=1)})),t.validate_gen=0!==a,t.loading=!1})).catch((function(e){t.loading=!1,t.$config.err_notice(t,e)}))):t.$Message.error("请填写具体地址或sql语句后再测试!")}))}},{key:"commitOrder",value:function(){var t=this,e=this.$refs["formItem"];this.validate_gen=!0,e.validate((function(e){e&&m.a.post("".concat(t.$config.url,"/sql/refer"),{ddl:t.formItem,sql:t.formItem.textarea,ty:1}).then((function(e){t.$Notice.success({title:"成功",desc:e.data})})).catch((function(e){t.$config.err_notice(t,e)}))}))}},{key:"mounted",value:function(){this.fetchIDC();var t,e=I(this.$config.highlight.split("|"));try{for(e.s();!(t=e.n()).done;){var a=t.value;this.wordList.push({vl:a,meta:"关键字"})}}catch(r){e.e(r)}finally{e.f()}}}]),a}(Object(p["b"])(b["a"],v["a"]));O=Object(u["a"])([Object(p["a"])({components:{editor:d["a"]}})],O);var C=O,$=C,w=(a("5d9d"),a("2877")),S=Object(w["a"])($,r,n,!1,null,null,null);e["default"]=S.exports}}]);
//# sourceMappingURL=chunk-aecabcaa.72c0c4cc.js.map